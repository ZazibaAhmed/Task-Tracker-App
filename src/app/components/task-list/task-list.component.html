<div class="tasks-container">
  <div class="header">
    <mat-button-toggle-group
       name="sort"
       [value]="sortBy"
       (change)="onSortChange($event.value)"
       appearance="legacy"
       aria-label="Sort Tasks">
      <mat-button-toggle value="priority">Sort by Priority</mat-button-toggle>
      <mat-button-toggle value="date">Sort by Creation Date</mat-button-toggle>
    </mat-button-toggle-group>
    <button mat-raised-button color="primary" (click)="openAddTaskDialog()">+ Add Task</button>
  </div>

  <div class="task-list-grid">
    <mat-card *ngFor="let task of tasks; let i = index" class="task-item"
              (click)="goToTaskDetail(task)"
              [appOverdueHighlight]="task.dueDate"
              tabindex="0">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <mat-card-title>{{ i+1 + ") " + task.title }}</mat-card-title>
        <button mat-icon-button color="warn"
                (click)="deleteTask(task)" matTooltip="Delete Task">
          <mat-icon>delete</mat-icon>
        </button>
      </div>

      <mat-card-content>
        <mat-chip [ngClass]="priorityClass(task.priority)">
          {{ task.priority }}
        </mat-chip>
        <div>Status: {{ task.status }}</div>
        <div>Due: {{ task.dueDate | dueDateFormat }}</div>
        <div>Category: {{ task.category }}</div>
        <div>
          Tags:
          <!--        <mat-chip-list>-->
          <!--          <mat-chip *ngFor="let tag of task.tags">{{ tag }}</mat-chip>-->
          <!--        </mat-chip-list>-->
        </div>
        <div>Description: {{ task.description | truncate:50  }}</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button (click)="archiveTask(task)">Archive</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
