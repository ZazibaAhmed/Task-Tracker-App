<div class="header">
    <h2>Tasks</h2>
    <button mat-raised-button color="primary" (click)="openAddTaskDialog()">+ Add Task</button>
</div>

<div class="task-list">
  <mat-card *ngFor="let task of tasks" class="task-item"
            (click)="goToTaskDetail(task)"
            [appOverdueHighlight]="task.dueDate"
            tabindex="0">
    <mat-card-title>{{ task.title }}</mat-card-title>
    <mat-card-content>
      <mat-chip [ngClass]="priorityClass(task.priority)">
        {{ task.priority }}
      </mat-chip>
      <div>Status: {{ task.status }}</div>
      <div>Due: {{ task.dueDate | dueDateFormat }}</div>
      <div>Category: {{ task.category }}</div>
      <div>
        Tags:
<!--        <mat-chip-list>-->
<!--          <mat-chip *ngFor="let tag of task.tags">{{ tag }}</mat-chip>-->
<!--        </mat-chip-list>-->
      </div>
      <div>Description: {{ task.description | truncate:50  }}</div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="accent" (click)="editTask(task)">Edit</button>
      <button mat-button color="warn" (click)="deleteTask(task)">Delete</button>
      <button mat-button (click)="archiveTask(task)" *ngIf="task.status !== 'Done'">Archive</button>
    </mat-card-actions>
  </mat-card>
</div>
